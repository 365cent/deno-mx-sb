<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1.0" name="viewport"><title>Get free GTS SSL for your website with Caddy</title><meta content="This article tells you how to get free Google Trust Services SSL certificate for your website with Caddy" name="description"><link rel="stylesheet" href="/pagefind/pagefind-ui.css"><link href="/styles.css" rel="stylesheet"><link href="/feed.xml" rel="alternate" title="mx.sb" type="application/atom+xml"><link href="/feed.json" rel="alternate" title="mx.sb" type="application/json"><meta content="blog" property="og:type"><meta content="mx.sb" property="og:site_name"><meta content="en" property="og:locale"><meta content="https://mx.sb/posts/free-gts-ssl-with-caddy/" property="og:url"><meta content="https://mx.sb/favicon.png" property="og:image"><meta content="summary" name="twitter:card"><meta content="https://mx.sb/favicon.png" name="twitter:image"><meta content="https://mx.sb/favicon.png" itemprop="image"><script type="text/javascript" src="/pagefind/pagefind-ui.js"></script><script type="text/javascript">window.addEventListener('DOMContentLoaded', () => { new PagefindUI({"element":"#search","showImages":false,"showEmptyFilters":true,"resetStyles":false,"bundlePath":"/pagefind/","baseUrl":"/"}); });</script></head><body><header><nav class="navbar"><a class="navbar-home" href="/"> <strong>mx.sb</strong> </a><ul class="navbar-links"><li><a href="/"> Home </a></li><li><a href="/posts/"> Archive </a></li><li><a href="/about/"> About </a></li></ul><div class="navbar-search"><div id="search"></div></div></nav></header><main class="body-post"><article class="post" data-pagefind-body=""><div class="post-header"><h1 class="post-title">Get free GTS SSL for your website with Caddy</h1><nav class="post-tags"><a class="tag" href="/tags/gts/">gts</a><a class="tag" href="/tags/googletrustservices/">googletrustservices</a><a class="tag" href="/tags/tls/">tls</a><a class="tag" href="/tags/ssl/">ssl</a><a class="tag" href="/tags/certificate/">certificate</a></nav><time datetime="2023-02-15 17:10:17" class="post-date"> February 15th, 2023 </time></div><div class="post-body"><p>Are you interested in learning how to obtain a free SSL certificate for your website from Google Trust Services using Caddy? Let me guide you through the process.</p><p>As you may be aware, Let's Encrypt's root certificate has expired, and some website owners have switched to a different certificate issuer or are dealing with Let's Encrypt's new root. For my personal websites, I use ZeroSSL and Amazon SSL, which work great for me, and Sectigo Root benefits from its accessible OSCP servers. However, I recently learned that Google is offering free public certificates for websites, which is pretty cool, and I decided to secure my website with GTS.</p><p>Here's how you can get a free SSL certificate from Google and install it with Caddy:</p><ol><li><p>Create a project on Google Cloud Platform first (it's free, and you get a free $200 credit when you sign up).</p></li><li><p>Get your project ID: go to your GCP dashboard (<a href="https://console.cloud.google.com/apis/dashboard">https://console.cloud.google.com/apis/dashboard</a>) and click the "My Project" button in the top left corner. Your project ID (e.g., sharp-fire-310310) should appear. Alternatively, you can copy your project ID after query in url ?project=<project>.</project></p></li><li><p>Go to https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=<project> to activate your Public Certificate Authority API. where Project ID is what you obtained in the previous step. Enable it for free.</project></p></li><li><p>Create an authority key: In the top right corner, click the Cloud Shell icon. Type in the following command:</p> <pre><code class="language-shell hljs">gcloud config set project &lt;Project ID&gt;
gcloud beta publicca external-account-keys create
</code></pre> <p>W﻿here Project ID is the same as previous step. (When it prompts up for authorization, click accept)</p> <p>I﻿f the key created successfully, it should return something like</p> <pre><code class="language-shell hljs">Created an external account key
[b64MacKey: 3f90fbuKnl9a0c8ItD-BZygttn-5yCxgak7NKVXHml5x3NM09cygJgbVZd1EDWxFif_OGzx2ZtDJCcH19_9QMA
keyId: 5743b1609344f82973328515f883faa1
</code></pre> <p>T﻿he phrase after b64MacKey is your key, and after keyId is key id you need to use.</p></li><li><p>Update your Caddyfile: add following to your global option for Caddy</p> <pre><code class="language-shell hljs">email &lt;Your email&gt;
acme_ca https://dv.acme-v02.api.pki.goog/directory
acme_eab {
        key_id &lt;Your keyId&gt;
        mac_key &lt;Your b64MacKey&gt;
}
</code></pre> <p>I﻿f you aren't familiar with Caddy global options, see <a href="https://caddyserver.com/docs/caddyfile/options#global-options">https://caddyserver.com/docs/caddyfile/options#global-options</a></p></li><li><p>R﻿eload Caddy: after run Caddy reload or systemctl restart caddy. Your GTS certificate should now be ready. (This is faster than I expected since Lets and ZeroSSL issue SSL certificates slower than this).</p></li><li><p>To confirm that your certificate is ready, run systemctl status caddy, and you should see output indicating that your GTS SSL is active.</p> <pre><code class="language-shell hljs">Feb 15 11:15:24 misty caddy[2981403]: {"level":"info","ts":1676477724.6448865,"logger":"tls","msg":"served key authentication certificate","server_name":"&lt;Your domain&gt;","challenge":"tls-alpn-01","remote":"46.29.169.36:63136","distributed":false}
Feb 15 11:15:28 misty caddy[2981403]: {"level":"info","ts":1676477728.6581016,"logger":"http.acme_client","msg":"authorization finalized","identifier":"&lt;Your domain&gt;","authz_status":"valid"}
Feb 15 11:15:28 misty caddy[2981403]: {"level":"info","ts":1676477728.6589515,"logger":"http.acme_client","msg":"validations succeeded; finalizing order","order":"https://dv.acme-v02.api.pki.goog/order/oCVILp8kjElvQnZWnvFX0A"}
Feb 15 11:15:34 misty caddy[2981403]: {"level":"info","ts":1676477734.5884278,"logger":"http.acme_client","msg":"successfully downloaded available certificate chains","count":1,"first_url":"https://dv.acme-v02.api.pki.goog/cert/4S6dCCidjIf3eN-C-pB-DhajSt0j7XoUQqTDq8fpltw"}
Feb 15 11:15:34 misty caddy[2981403]: {"level":"info","ts":1676477734.589921,"logger":"tls.obtain","msg":"certificate obtained successfully","identifier":"&lt;Your domain&gt;"}
Feb 15 11:15:34 misty caddy[2981403]: {"level":"info","ts":1676477734.5903862,"logger":"tls.obtain","msg":"releasing lock","identifier":"&lt;Your domain&gt;"}
</code></pre></li></ol><p>And that's it! Your website should now be secured with a free SSL certificate from Google Trust Services. Check it out and enjoy the added security. I've included an image of a website secured with GTS SSL for reference</p><p><img alt="Website with GTS SSL" src="https://ucarecdn.com/0045ec29-51b0-4ed9-827f-2419623e4f4a/"></p></div></article><hr><script async="" crossorigin="anonymous" issue-term="title" repo="365cent/comments" src="https://utteranc.es/client.js" theme="github-light"></script><hr><nav class="post-navigation"><ul><li>← Previous: <a href="/posts/helloworld/" rel="prev">Hello World</a></li><li><strong>Next: <a href="/posts/host-your-own-tor-exit-relay-node/" rel="next">Host your own Tor exit / relay node</a> →</strong></li></ul></nav></main><footer></footer><script data-api="/api/event" data-domain="mx.sb" defer="" src="/script.js"></script></body></html>